{"ast":null,"code":"'use strict';\n\nvar _defineProperty = require(\"D:/web/silly/silly/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\n\nvar _EXITS_FOREIGN_CONTEN;\n\nvar Tokenizer = require('../tokenizer');\n\nvar HTML = require('./html'); //Aliases\n\n\nvar $ = HTML.TAG_NAMES;\nvar NS = HTML.NAMESPACES;\nvar ATTRS = HTML.ATTRS; //MIME types\n\nvar MIME_TYPES = {\n  TEXT_HTML: 'text/html',\n  APPLICATION_XML: 'application/xhtml+xml'\n}; //Attributes\n\nvar DEFINITION_URL_ATTR = 'definitionurl';\nvar ADJUSTED_DEFINITION_URL_ATTR = 'definitionURL';\nvar SVG_ATTRS_ADJUSTMENT_MAP = {\n  attributename: 'attributeName',\n  attributetype: 'attributeType',\n  basefrequency: 'baseFrequency',\n  baseprofile: 'baseProfile',\n  calcmode: 'calcMode',\n  clippathunits: 'clipPathUnits',\n  diffuseconstant: 'diffuseConstant',\n  edgemode: 'edgeMode',\n  filterunits: 'filterUnits',\n  glyphref: 'glyphRef',\n  gradienttransform: 'gradientTransform',\n  gradientunits: 'gradientUnits',\n  kernelmatrix: 'kernelMatrix',\n  kernelunitlength: 'kernelUnitLength',\n  keypoints: 'keyPoints',\n  keysplines: 'keySplines',\n  keytimes: 'keyTimes',\n  lengthadjust: 'lengthAdjust',\n  limitingconeangle: 'limitingConeAngle',\n  markerheight: 'markerHeight',\n  markerunits: 'markerUnits',\n  markerwidth: 'markerWidth',\n  maskcontentunits: 'maskContentUnits',\n  maskunits: 'maskUnits',\n  numoctaves: 'numOctaves',\n  pathlength: 'pathLength',\n  patterncontentunits: 'patternContentUnits',\n  patterntransform: 'patternTransform',\n  patternunits: 'patternUnits',\n  pointsatx: 'pointsAtX',\n  pointsaty: 'pointsAtY',\n  pointsatz: 'pointsAtZ',\n  preservealpha: 'preserveAlpha',\n  preserveaspectratio: 'preserveAspectRatio',\n  primitiveunits: 'primitiveUnits',\n  refx: 'refX',\n  refy: 'refY',\n  repeatcount: 'repeatCount',\n  repeatdur: 'repeatDur',\n  requiredextensions: 'requiredExtensions',\n  requiredfeatures: 'requiredFeatures',\n  specularconstant: 'specularConstant',\n  specularexponent: 'specularExponent',\n  spreadmethod: 'spreadMethod',\n  startoffset: 'startOffset',\n  stddeviation: 'stdDeviation',\n  stitchtiles: 'stitchTiles',\n  surfacescale: 'surfaceScale',\n  systemlanguage: 'systemLanguage',\n  tablevalues: 'tableValues',\n  targetx: 'targetX',\n  targety: 'targetY',\n  textlength: 'textLength',\n  viewbox: 'viewBox',\n  viewtarget: 'viewTarget',\n  xchannelselector: 'xChannelSelector',\n  ychannelselector: 'yChannelSelector',\n  zoomandpan: 'zoomAndPan'\n};\nvar XML_ATTRS_ADJUSTMENT_MAP = {\n  'xlink:actuate': {\n    prefix: 'xlink',\n    name: 'actuate',\n    namespace: NS.XLINK\n  },\n  'xlink:arcrole': {\n    prefix: 'xlink',\n    name: 'arcrole',\n    namespace: NS.XLINK\n  },\n  'xlink:href': {\n    prefix: 'xlink',\n    name: 'href',\n    namespace: NS.XLINK\n  },\n  'xlink:role': {\n    prefix: 'xlink',\n    name: 'role',\n    namespace: NS.XLINK\n  },\n  'xlink:show': {\n    prefix: 'xlink',\n    name: 'show',\n    namespace: NS.XLINK\n  },\n  'xlink:title': {\n    prefix: 'xlink',\n    name: 'title',\n    namespace: NS.XLINK\n  },\n  'xlink:type': {\n    prefix: 'xlink',\n    name: 'type',\n    namespace: NS.XLINK\n  },\n  'xml:base': {\n    prefix: 'xml',\n    name: 'base',\n    namespace: NS.XML\n  },\n  'xml:lang': {\n    prefix: 'xml',\n    name: 'lang',\n    namespace: NS.XML\n  },\n  'xml:space': {\n    prefix: 'xml',\n    name: 'space',\n    namespace: NS.XML\n  },\n  xmlns: {\n    prefix: '',\n    name: 'xmlns',\n    namespace: NS.XMLNS\n  },\n  'xmlns:xlink': {\n    prefix: 'xmlns',\n    name: 'xlink',\n    namespace: NS.XMLNS\n  }\n}; //SVG tag names adjustment map\n\nvar SVG_TAG_NAMES_ADJUSTMENT_MAP = exports.SVG_TAG_NAMES_ADJUSTMENT_MAP = {\n  altglyph: 'altGlyph',\n  altglyphdef: 'altGlyphDef',\n  altglyphitem: 'altGlyphItem',\n  animatecolor: 'animateColor',\n  animatemotion: 'animateMotion',\n  animatetransform: 'animateTransform',\n  clippath: 'clipPath',\n  feblend: 'feBlend',\n  fecolormatrix: 'feColorMatrix',\n  fecomponenttransfer: 'feComponentTransfer',\n  fecomposite: 'feComposite',\n  feconvolvematrix: 'feConvolveMatrix',\n  fediffuselighting: 'feDiffuseLighting',\n  fedisplacementmap: 'feDisplacementMap',\n  fedistantlight: 'feDistantLight',\n  feflood: 'feFlood',\n  fefunca: 'feFuncA',\n  fefuncb: 'feFuncB',\n  fefuncg: 'feFuncG',\n  fefuncr: 'feFuncR',\n  fegaussianblur: 'feGaussianBlur',\n  feimage: 'feImage',\n  femerge: 'feMerge',\n  femergenode: 'feMergeNode',\n  femorphology: 'feMorphology',\n  feoffset: 'feOffset',\n  fepointlight: 'fePointLight',\n  fespecularlighting: 'feSpecularLighting',\n  fespotlight: 'feSpotLight',\n  fetile: 'feTile',\n  feturbulence: 'feTurbulence',\n  foreignobject: 'foreignObject',\n  glyphref: 'glyphRef',\n  lineargradient: 'linearGradient',\n  radialgradient: 'radialGradient',\n  textpath: 'textPath'\n}; //Tags that causes exit from foreign content\n\nvar EXITS_FOREIGN_CONTENT = (_EXITS_FOREIGN_CONTEN = {}, _defineProperty(_EXITS_FOREIGN_CONTEN, $.B, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.BIG, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.BLOCKQUOTE, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.BODY, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.BR, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.CENTER, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.CODE, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.DD, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.DIV, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.DL, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.DT, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.EM, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.EMBED, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.H1, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.H2, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.H3, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.H4, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.H5, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.H6, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.HEAD, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.HR, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.I, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.IMG, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.LI, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.LISTING, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.MENU, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.META, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.NOBR, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.OL, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.P, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.PRE, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.RUBY, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.S, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.SMALL, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.SPAN, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.STRONG, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.STRIKE, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.SUB, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.SUP, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.TABLE, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.TT, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.U, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.UL, true), _defineProperty(_EXITS_FOREIGN_CONTEN, $.VAR, true), _EXITS_FOREIGN_CONTEN); //Check exit from foreign content\n\nexports.causesExit = function (startTagToken) {\n  var tn = startTagToken.tagName;\n  var isFontWithAttrs = tn === $.FONT && (Tokenizer.getTokenAttr(startTagToken, ATTRS.COLOR) !== null || Tokenizer.getTokenAttr(startTagToken, ATTRS.SIZE) !== null || Tokenizer.getTokenAttr(startTagToken, ATTRS.FACE) !== null);\n  return isFontWithAttrs ? true : EXITS_FOREIGN_CONTENT[tn];\n}; //Token adjustments\n\n\nexports.adjustTokenMathMLAttrs = function (token) {\n  for (var i = 0; i < token.attrs.length; i++) {\n    if (token.attrs[i].name === DEFINITION_URL_ATTR) {\n      token.attrs[i].name = ADJUSTED_DEFINITION_URL_ATTR;\n      break;\n    }\n  }\n};\n\nexports.adjustTokenSVGAttrs = function (token) {\n  for (var i = 0; i < token.attrs.length; i++) {\n    var adjustedAttrName = SVG_ATTRS_ADJUSTMENT_MAP[token.attrs[i].name];\n\n    if (adjustedAttrName) {\n      token.attrs[i].name = adjustedAttrName;\n    }\n  }\n};\n\nexports.adjustTokenXMLAttrs = function (token) {\n  for (var i = 0; i < token.attrs.length; i++) {\n    var adjustedAttrEntry = XML_ATTRS_ADJUSTMENT_MAP[token.attrs[i].name];\n\n    if (adjustedAttrEntry) {\n      token.attrs[i].prefix = adjustedAttrEntry.prefix;\n      token.attrs[i].name = adjustedAttrEntry.name;\n      token.attrs[i].namespace = adjustedAttrEntry.namespace;\n    }\n  }\n};\n\nexports.adjustTokenSVGTagName = function (token) {\n  var adjustedTagName = SVG_TAG_NAMES_ADJUSTMENT_MAP[token.tagName];\n\n  if (adjustedTagName) {\n    token.tagName = adjustedTagName;\n  }\n}; //Integration points\n\n\nfunction isMathMLTextIntegrationPoint(tn, ns) {\n  return ns === NS.MATHML && (tn === $.MI || tn === $.MO || tn === $.MN || tn === $.MS || tn === $.MTEXT);\n}\n\nfunction isHtmlIntegrationPoint(tn, ns, attrs) {\n  if (ns === NS.MATHML && tn === $.ANNOTATION_XML) {\n    for (var i = 0; i < attrs.length; i++) {\n      if (attrs[i].name === ATTRS.ENCODING) {\n        var value = attrs[i].value.toLowerCase();\n        return value === MIME_TYPES.TEXT_HTML || value === MIME_TYPES.APPLICATION_XML;\n      }\n    }\n  }\n\n  return ns === NS.SVG && (tn === $.FOREIGN_OBJECT || tn === $.DESC || tn === $.TITLE);\n}\n\nexports.isIntegrationPoint = function (tn, ns, attrs, foreignNS) {\n  if ((!foreignNS || foreignNS === NS.HTML) && isHtmlIntegrationPoint(tn, ns, attrs)) {\n    return true;\n  }\n\n  if ((!foreignNS || foreignNS === NS.MATHML) && isMathMLTextIntegrationPoint(tn, ns)) {\n    return true;\n  }\n\n  return false;\n};","map":{"version":3,"names":["Tokenizer","require","HTML","$","TAG_NAMES","NS","NAMESPACES","ATTRS","MIME_TYPES","TEXT_HTML","APPLICATION_XML","DEFINITION_URL_ATTR","ADJUSTED_DEFINITION_URL_ATTR","SVG_ATTRS_ADJUSTMENT_MAP","attributename","attributetype","basefrequency","baseprofile","calcmode","clippathunits","diffuseconstant","edgemode","filterunits","glyphref","gradienttransform","gradientunits","kernelmatrix","kernelunitlength","keypoints","keysplines","keytimes","lengthadjust","limitingconeangle","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","numoctaves","pathlength","patterncontentunits","patterntransform","patternunits","pointsatx","pointsaty","pointsatz","preservealpha","preserveaspectratio","primitiveunits","refx","refy","repeatcount","repeatdur","requiredextensions","requiredfeatures","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","surfacescale","systemlanguage","tablevalues","targetx","targety","textlength","viewbox","viewtarget","xchannelselector","ychannelselector","zoomandpan","XML_ATTRS_ADJUSTMENT_MAP","prefix","name","namespace","XLINK","XML","xmlns","XMLNS","SVG_TAG_NAMES_ADJUSTMENT_MAP","exports","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","clippath","feblend","fecolormatrix","fecomponenttransfer","fecomposite","feconvolvematrix","fediffuselighting","fedisplacementmap","fedistantlight","feflood","fefunca","fefuncb","fefuncg","fefuncr","fegaussianblur","feimage","femerge","femergenode","femorphology","feoffset","fepointlight","fespecularlighting","fespotlight","fetile","feturbulence","foreignobject","lineargradient","radialgradient","textpath","EXITS_FOREIGN_CONTENT","B","BIG","BLOCKQUOTE","BODY","BR","CENTER","CODE","DD","DIV","DL","DT","EM","EMBED","H1","H2","H3","H4","H5","H6","HEAD","HR","I","IMG","LI","LISTING","MENU","META","NOBR","OL","P","PRE","RUBY","S","SMALL","SPAN","STRONG","STRIKE","SUB","SUP","TABLE","TT","U","UL","VAR","causesExit","startTagToken","tn","tagName","isFontWithAttrs","FONT","getTokenAttr","COLOR","SIZE","FACE","adjustTokenMathMLAttrs","token","i","attrs","length","adjustTokenSVGAttrs","adjustedAttrName","adjustTokenXMLAttrs","adjustedAttrEntry","adjustTokenSVGTagName","adjustedTagName","isMathMLTextIntegrationPoint","ns","MATHML","MI","MO","MN","MS","MTEXT","isHtmlIntegrationPoint","ANNOTATION_XML","ENCODING","value","toLowerCase","SVG","FOREIGN_OBJECT","DESC","TITLE","isIntegrationPoint","foreignNS"],"sources":["D:/web/silly/silly/node_modules/parse5/lib/common/foreign-content.js"],"sourcesContent":["'use strict';\n\nconst Tokenizer = require('../tokenizer');\nconst HTML = require('./html');\n\n//Aliases\nconst $ = HTML.TAG_NAMES;\nconst NS = HTML.NAMESPACES;\nconst ATTRS = HTML.ATTRS;\n\n//MIME types\nconst MIME_TYPES = {\n    TEXT_HTML: 'text/html',\n    APPLICATION_XML: 'application/xhtml+xml'\n};\n\n//Attributes\nconst DEFINITION_URL_ATTR = 'definitionurl';\nconst ADJUSTED_DEFINITION_URL_ATTR = 'definitionURL';\nconst SVG_ATTRS_ADJUSTMENT_MAP = {\n    attributename: 'attributeName',\n    attributetype: 'attributeType',\n    basefrequency: 'baseFrequency',\n    baseprofile: 'baseProfile',\n    calcmode: 'calcMode',\n    clippathunits: 'clipPathUnits',\n    diffuseconstant: 'diffuseConstant',\n    edgemode: 'edgeMode',\n    filterunits: 'filterUnits',\n    glyphref: 'glyphRef',\n    gradienttransform: 'gradientTransform',\n    gradientunits: 'gradientUnits',\n    kernelmatrix: 'kernelMatrix',\n    kernelunitlength: 'kernelUnitLength',\n    keypoints: 'keyPoints',\n    keysplines: 'keySplines',\n    keytimes: 'keyTimes',\n    lengthadjust: 'lengthAdjust',\n    limitingconeangle: 'limitingConeAngle',\n    markerheight: 'markerHeight',\n    markerunits: 'markerUnits',\n    markerwidth: 'markerWidth',\n    maskcontentunits: 'maskContentUnits',\n    maskunits: 'maskUnits',\n    numoctaves: 'numOctaves',\n    pathlength: 'pathLength',\n    patterncontentunits: 'patternContentUnits',\n    patterntransform: 'patternTransform',\n    patternunits: 'patternUnits',\n    pointsatx: 'pointsAtX',\n    pointsaty: 'pointsAtY',\n    pointsatz: 'pointsAtZ',\n    preservealpha: 'preserveAlpha',\n    preserveaspectratio: 'preserveAspectRatio',\n    primitiveunits: 'primitiveUnits',\n    refx: 'refX',\n    refy: 'refY',\n    repeatcount: 'repeatCount',\n    repeatdur: 'repeatDur',\n    requiredextensions: 'requiredExtensions',\n    requiredfeatures: 'requiredFeatures',\n    specularconstant: 'specularConstant',\n    specularexponent: 'specularExponent',\n    spreadmethod: 'spreadMethod',\n    startoffset: 'startOffset',\n    stddeviation: 'stdDeviation',\n    stitchtiles: 'stitchTiles',\n    surfacescale: 'surfaceScale',\n    systemlanguage: 'systemLanguage',\n    tablevalues: 'tableValues',\n    targetx: 'targetX',\n    targety: 'targetY',\n    textlength: 'textLength',\n    viewbox: 'viewBox',\n    viewtarget: 'viewTarget',\n    xchannelselector: 'xChannelSelector',\n    ychannelselector: 'yChannelSelector',\n    zoomandpan: 'zoomAndPan'\n};\n\nconst XML_ATTRS_ADJUSTMENT_MAP = {\n    'xlink:actuate': { prefix: 'xlink', name: 'actuate', namespace: NS.XLINK },\n    'xlink:arcrole': { prefix: 'xlink', name: 'arcrole', namespace: NS.XLINK },\n    'xlink:href': { prefix: 'xlink', name: 'href', namespace: NS.XLINK },\n    'xlink:role': { prefix: 'xlink', name: 'role', namespace: NS.XLINK },\n    'xlink:show': { prefix: 'xlink', name: 'show', namespace: NS.XLINK },\n    'xlink:title': { prefix: 'xlink', name: 'title', namespace: NS.XLINK },\n    'xlink:type': { prefix: 'xlink', name: 'type', namespace: NS.XLINK },\n    'xml:base': { prefix: 'xml', name: 'base', namespace: NS.XML },\n    'xml:lang': { prefix: 'xml', name: 'lang', namespace: NS.XML },\n    'xml:space': { prefix: 'xml', name: 'space', namespace: NS.XML },\n    xmlns: { prefix: '', name: 'xmlns', namespace: NS.XMLNS },\n    'xmlns:xlink': { prefix: 'xmlns', name: 'xlink', namespace: NS.XMLNS }\n};\n\n//SVG tag names adjustment map\nconst SVG_TAG_NAMES_ADJUSTMENT_MAP = (exports.SVG_TAG_NAMES_ADJUSTMENT_MAP = {\n    altglyph: 'altGlyph',\n    altglyphdef: 'altGlyphDef',\n    altglyphitem: 'altGlyphItem',\n    animatecolor: 'animateColor',\n    animatemotion: 'animateMotion',\n    animatetransform: 'animateTransform',\n    clippath: 'clipPath',\n    feblend: 'feBlend',\n    fecolormatrix: 'feColorMatrix',\n    fecomponenttransfer: 'feComponentTransfer',\n    fecomposite: 'feComposite',\n    feconvolvematrix: 'feConvolveMatrix',\n    fediffuselighting: 'feDiffuseLighting',\n    fedisplacementmap: 'feDisplacementMap',\n    fedistantlight: 'feDistantLight',\n    feflood: 'feFlood',\n    fefunca: 'feFuncA',\n    fefuncb: 'feFuncB',\n    fefuncg: 'feFuncG',\n    fefuncr: 'feFuncR',\n    fegaussianblur: 'feGaussianBlur',\n    feimage: 'feImage',\n    femerge: 'feMerge',\n    femergenode: 'feMergeNode',\n    femorphology: 'feMorphology',\n    feoffset: 'feOffset',\n    fepointlight: 'fePointLight',\n    fespecularlighting: 'feSpecularLighting',\n    fespotlight: 'feSpotLight',\n    fetile: 'feTile',\n    feturbulence: 'feTurbulence',\n    foreignobject: 'foreignObject',\n    glyphref: 'glyphRef',\n    lineargradient: 'linearGradient',\n    radialgradient: 'radialGradient',\n    textpath: 'textPath'\n});\n\n//Tags that causes exit from foreign content\nconst EXITS_FOREIGN_CONTENT = {\n    [$.B]: true,\n    [$.BIG]: true,\n    [$.BLOCKQUOTE]: true,\n    [$.BODY]: true,\n    [$.BR]: true,\n    [$.CENTER]: true,\n    [$.CODE]: true,\n    [$.DD]: true,\n    [$.DIV]: true,\n    [$.DL]: true,\n    [$.DT]: true,\n    [$.EM]: true,\n    [$.EMBED]: true,\n    [$.H1]: true,\n    [$.H2]: true,\n    [$.H3]: true,\n    [$.H4]: true,\n    [$.H5]: true,\n    [$.H6]: true,\n    [$.HEAD]: true,\n    [$.HR]: true,\n    [$.I]: true,\n    [$.IMG]: true,\n    [$.LI]: true,\n    [$.LISTING]: true,\n    [$.MENU]: true,\n    [$.META]: true,\n    [$.NOBR]: true,\n    [$.OL]: true,\n    [$.P]: true,\n    [$.PRE]: true,\n    [$.RUBY]: true,\n    [$.S]: true,\n    [$.SMALL]: true,\n    [$.SPAN]: true,\n    [$.STRONG]: true,\n    [$.STRIKE]: true,\n    [$.SUB]: true,\n    [$.SUP]: true,\n    [$.TABLE]: true,\n    [$.TT]: true,\n    [$.U]: true,\n    [$.UL]: true,\n    [$.VAR]: true\n};\n\n//Check exit from foreign content\nexports.causesExit = function(startTagToken) {\n    const tn = startTagToken.tagName;\n    const isFontWithAttrs =\n        tn === $.FONT &&\n        (Tokenizer.getTokenAttr(startTagToken, ATTRS.COLOR) !== null ||\n            Tokenizer.getTokenAttr(startTagToken, ATTRS.SIZE) !== null ||\n            Tokenizer.getTokenAttr(startTagToken, ATTRS.FACE) !== null);\n\n    return isFontWithAttrs ? true : EXITS_FOREIGN_CONTENT[tn];\n};\n\n//Token adjustments\nexports.adjustTokenMathMLAttrs = function(token) {\n    for (let i = 0; i < token.attrs.length; i++) {\n        if (token.attrs[i].name === DEFINITION_URL_ATTR) {\n            token.attrs[i].name = ADJUSTED_DEFINITION_URL_ATTR;\n            break;\n        }\n    }\n};\n\nexports.adjustTokenSVGAttrs = function(token) {\n    for (let i = 0; i < token.attrs.length; i++) {\n        const adjustedAttrName = SVG_ATTRS_ADJUSTMENT_MAP[token.attrs[i].name];\n\n        if (adjustedAttrName) {\n            token.attrs[i].name = adjustedAttrName;\n        }\n    }\n};\n\nexports.adjustTokenXMLAttrs = function(token) {\n    for (let i = 0; i < token.attrs.length; i++) {\n        const adjustedAttrEntry = XML_ATTRS_ADJUSTMENT_MAP[token.attrs[i].name];\n\n        if (adjustedAttrEntry) {\n            token.attrs[i].prefix = adjustedAttrEntry.prefix;\n            token.attrs[i].name = adjustedAttrEntry.name;\n            token.attrs[i].namespace = adjustedAttrEntry.namespace;\n        }\n    }\n};\n\nexports.adjustTokenSVGTagName = function(token) {\n    const adjustedTagName = SVG_TAG_NAMES_ADJUSTMENT_MAP[token.tagName];\n\n    if (adjustedTagName) {\n        token.tagName = adjustedTagName;\n    }\n};\n\n//Integration points\nfunction isMathMLTextIntegrationPoint(tn, ns) {\n    return ns === NS.MATHML && (tn === $.MI || tn === $.MO || tn === $.MN || tn === $.MS || tn === $.MTEXT);\n}\n\nfunction isHtmlIntegrationPoint(tn, ns, attrs) {\n    if (ns === NS.MATHML && tn === $.ANNOTATION_XML) {\n        for (let i = 0; i < attrs.length; i++) {\n            if (attrs[i].name === ATTRS.ENCODING) {\n                const value = attrs[i].value.toLowerCase();\n\n                return value === MIME_TYPES.TEXT_HTML || value === MIME_TYPES.APPLICATION_XML;\n            }\n        }\n    }\n\n    return ns === NS.SVG && (tn === $.FOREIGN_OBJECT || tn === $.DESC || tn === $.TITLE);\n}\n\nexports.isIntegrationPoint = function(tn, ns, attrs, foreignNS) {\n    if ((!foreignNS || foreignNS === NS.HTML) && isHtmlIntegrationPoint(tn, ns, attrs)) {\n        return true;\n    }\n\n    if ((!foreignNS || foreignNS === NS.MATHML) && isMathMLTextIntegrationPoint(tn, ns)) {\n        return true;\n    }\n\n    return false;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}